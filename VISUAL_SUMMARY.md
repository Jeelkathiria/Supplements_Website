# ğŸ“Š Visual Implementation Summary

## Features at a Glance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SUPPLEMENTS ECOMMERCE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âœ… AUTHENTICATION                                              â”‚
â”‚     â”œâ”€ Email/Password Registration                             â”‚
â”‚     â”œâ”€ Email/Password Login                                    â”‚
â”‚     â”œâ”€ Firebase Security                                       â”‚
â”‚     â””â”€ JWT Token Management                                    â”‚
â”‚                                                                 â”‚
â”‚  âœ… USER MANAGEMENT                                             â”‚
â”‚     â”œâ”€ User Profile in PostgreSQL                              â”‚
â”‚     â”œâ”€ firebaseUid Bridge                                      â”‚
â”‚     â””â”€ User Sync After Auth                                    â”‚
â”‚                                                                 â”‚
â”‚  âœ… ADDRESS MANAGEMENT                                          â”‚
â”‚     â”œâ”€ Save Multiple Addresses                                 â”‚
â”‚     â”œâ”€ Fetch & Display Addresses                               â”‚
â”‚     â”œâ”€ Set Default Address                                     â”‚
â”‚     â”œâ”€ Delete Addresses                                        â”‚
â”‚     â””â”€ Delete Address                                          â”‚
â”‚                                                                 â”‚
â”‚  âœ… CHECKOUT INTEGRATION                                        â”‚
â”‚     â”œâ”€ Address Selection                                       â”‚
â”‚     â”œâ”€ Add New Address Form                                    â”‚
â”‚     â”œâ”€ Save for Future Use                                     â”‚
â”‚     â”œâ”€ Order with Address                                      â”‚
â”‚     â””â”€ Auto-save on Submit                                     â”‚
â”‚                                                                 â”‚
â”‚  âœ… CART ENHANCEMENT                                            â”‚
â”‚     â”œâ”€ Flavor Selection                                        â”‚
â”‚     â”œâ”€ Size Selection                                          â”‚
â”‚     â””â”€ Store in Database                                       â”‚
â”‚                                                                 â”‚
â”‚  âœ… ADMIN FEATURES                                              â”‚
â”‚     â”œâ”€ View Orders                                             â”‚
â”‚     â”œâ”€ See Flavor/Size                                         â”‚
â”‚     â””â”€ See Delivery Address                                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FRONTEND (React + TypeScript + Tailwind)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â€¢ React Router - Page routing                                 â”‚
â”‚  â€¢ Context API - State management                              â”‚
â”‚  â€¢ Firebase Auth - Email/password auth                         â”‚
â”‚  â€¢ Sonner - Toast notifications                                â”‚
â”‚  â€¢ Lucide React - Icons                                        â”‚
â”‚  â€¢ Tailwind CSS - Styling                                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND (Express + TypeScript + Node.js)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â€¢ Express - REST API                                          â”‚
â”‚  â€¢ Firebase Admin SDK - JWT validation                         â”‚
â”‚  â€¢ Prisma - ORM & migrations                                   â”‚
â”‚  â€¢ PostgreSQL - Relational database                            â”‚
â”‚  â€¢ TypeScript - Type safety                                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EXTERNAL SERVICES                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â€¢ Firebase Authentication - User credentials                  â”‚
â”‚  â€¢ Firebase Admin SDK - Token validation                       â”‚
â”‚  â€¢ PostgreSQL - Data persistence                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ New User â”‚â”€â”€â”€â”€â†’â”‚Registerâ”‚â”€â”€â”€â”€â†’â”‚ Firebase â”‚â”€â”€â”€â”€â†’â”‚PostgreSQL
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  Form  â”‚     â”‚   Auth   â”‚     â”‚ User Record
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â””â”€â†’ AuthContext
                            (JWT stored)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Returning â”‚â”€â”€â”€â”€â†’â”‚ Login â”‚â”€â”€â”€â”€â†’â”‚ Firebase â”‚â”€â”€â”€â”€â†’â”‚PostgreSQL
â”‚  User    â”‚     â”‚ Form  â”‚     â”‚   Auth   â”‚     â”‚ User Record
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â””â”€â†’ AuthContext
                            (JWT loaded)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Checkout  â”‚â”€â”€â”€â”€â†’â”‚Load Saved â”‚â”€â”€â”€â”€â†’â”‚ Show Radio  â”‚â”€â”€â”€â”€â†’â”‚User Selects
â”‚  Page      â”‚     â”‚ Addresses â”‚     â”‚  Buttons    â”‚     â”‚  Address
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â”œâ”€â†’ OR
                                              â”‚
                                              â””â”€â†’ Use New Address
                                                  (Form shown)
                                                       â”‚
                                                       â””â”€â†’ Check
                                                           "Save"
                                                           â”‚
                                                      PostgreSQL
                                                    Address Record
                                                       â”‚
                                                    Order Created


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Order Placedâ”‚â†â”€â”€â”€â”€â”‚Order API â”‚â†â”€â”€â”€â”€â”‚Checkout  â”‚â†â”€â”€â”€â”€â”‚ "Save if
â”‚  Success   â”‚     â”‚  Called  â”‚     â”‚ Submit   â”‚     â”‚  Checked"
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Schema Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜… id (UUID)                      â”‚
â”‚ â˜… firebaseUid (UNIQUE)           â”‚
â”‚   email                          â”‚
â”‚   name                           â”‚
â”‚   phone                          â”‚
â”‚   createdAt                      â”‚
â”‚   updatedAt                      â”‚
â”‚   â†’ addresses (1:N)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:N
           â”‚ userId
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Address                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜… id (UUID)                      â”‚
â”‚ â˜… userId (FK)                    â”‚
â”‚   name                           â”‚
â”‚   phone                          â”‚
â”‚   address                        â”‚
â”‚   city                           â”‚
â”‚   state                          â”‚
â”‚   pincode                        â”‚
â”‚   isDefault                      â”‚
â”‚   createdAt                      â”‚
â”‚   updatedAt                      â”‚
â”‚                                  â”‚
â”‚ CASCADE DELETE on user delete    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Request/Response Flow

```
CLIENT (Frontend)              NETWORK              SERVER (Backend)      DATABASE

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Register Form  â”‚                                â”‚  requireAuth   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                â”‚  Middleware    â”‚
â”‚ name, email, pw â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    â†“            â”‚
â”‚ Firebase Auth   â”‚
â”‚ (create user)   â”‚
â”‚    â†“            â”‚
â”‚ Get JWT         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ POST /api/user/sync
        â”‚ Authorization: Bearer JWT
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚ Validate JWT      â”‚
        â”‚                            â”‚ Extract firebaseUid
        â”‚                            â”‚    â†“              â”‚
        â”‚                            â”‚ Look up or        â”‚
        â”‚                            â”‚ Create User       â”‚
        â”‚                            â”‚    â†“              â”‚
        â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                    â”‚
        â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â†“â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚ INSERT INTO User â”‚
        â”‚                            â”‚ (firebaseUid,    â”‚
        â”‚                            â”‚  email, name)    â”‚
        â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                    â”‚
        â”‚â†â”€â”€â”€â”€ User Object (JSON) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Store token in       â”‚
â”‚ localStorage         â”‚
â”‚ Redirect to checkout â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


CLIENT (Frontend)              NETWORK              SERVER (Backend)      DATABASE

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Checkout      â”‚                                â”‚  requireAuth   â”‚
â”‚   Component     â”‚                                â”‚  Middleware    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ useEffect fires â”‚
â”‚    â†“            â”‚
â”‚ loadAddresses() â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ GET /api/user/address
        â”‚ Authorization: Bearer JWT
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚ Validate JWT      â”‚
        â”‚                            â”‚ Extract firebaseUid
        â”‚                            â”‚    â†“              â”‚
        â”‚                            â”‚ Find User.id by   â”‚
        â”‚                            â”‚ firebaseUid       â”‚
        â”‚                            â”‚    â†“              â”‚
        â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                    â”‚
        â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â†“â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚ SELECT * FROM Address
        â”‚                            â”‚ WHERE userId = {id}  â”‚
        â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                    â”‚
        â”‚â†â”€â”€â”€â”€ Address[] (JSON) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Display addresses        â”‚
â”‚ as radio buttons         â”‚
â”‚ Set first as selected    â”‚
â”‚ Remove loading state     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


CLIENT (Frontend)              NETWORK              SERVER (Backend)      DATABASE

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Checkout       â”‚                               â”‚  requireAuth   â”‚
â”‚   Submit Form    â”‚                               â”‚  Middleware    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ if saveAddress:  â”‚
â”‚   â†“              â”‚
â”‚ addAddress()     â”‚
â”‚   â†“              â”‚
â”‚ POST request     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ POST /api/user/address
        â”‚ Authorization: Bearer JWT
        â”‚ Body: { name, phone, address, city, ... }
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚ Validate JWT      â”‚
        â”‚                            â”‚ Extract firebaseUid
        â”‚                            â”‚    â†“              â”‚
        â”‚                            â”‚ Find User.id by   â”‚
        â”‚                            â”‚ firebaseUid       â”‚
        â”‚                            â”‚    â†“              â”‚
        â”‚                            â”‚ Create Address    â”‚
        â”‚                            â”‚ with userId       â”‚
        â”‚                            â”‚    â†“              â”‚
        â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                    â”‚
        â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â†“â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚ INSERT INTO Address  â”‚
        â”‚                            â”‚ (userId, name,       â”‚
        â”‚                            â”‚  phone, address, ...) â”‚
        â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                    â”‚
        â”‚â†â”€â”€â”€â”€ Address Object â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show toast:       â”‚
â”‚ "Address saved"   â”‚
â”‚ Continue with     â”‚
â”‚ order creation    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AuthContext (Global State)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  user: { email, name, loginTime }               â”‚
â”‚  â†“ Persisted in localStorage                   â”‚
â”‚                                                 â”‚
â”‚  firebaseUser: Firebase User object             â”‚
â”‚  â†“ From Firebase Auth                          â”‚
â”‚                                                 â”‚
â”‚  isAuthenticated: boolean                       â”‚
â”‚  â†“ Derived from user presence                  â”‚
â”‚                                                 â”‚
â”‚  Functions:                                    â”‚
â”‚  â€¢ login(email, pass)                          â”‚
â”‚  â€¢ register(name, email, pass)                 â”‚
â”‚  â€¢ logout()                                    â”‚
â”‚  â€¢ getIdToken()                                â”‚
â”‚                                                 â”‚
â”‚  authToken in localStorage                     â”‚
â”‚  â†“ Used in API calls as Bearer token          â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
         Consumed by:
         â€¢ Login page (for login action)
         â€¢ Register page (for register action)
         â€¢ Checkout page (for redirect logic)
         â€¢ All protected routes


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Checkout Component State                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  savedAddresses: Address[]                      â”‚
â”‚  â†“ From GET /api/user/address                 â”‚
â”‚                                                 â”‚
â”‚  loadingAddresses: boolean                      â”‚
â”‚  â†“ Shows loading indicator                    â”‚
â”‚                                                 â”‚
â”‚  useExistingAddress: boolean                    â”‚
â”‚  â†“ Toggle existing vs new address             â”‚
â”‚                                                 â”‚
â”‚  selectedAddressId: string | null               â”‚
â”‚  â†“ Which address user selected                â”‚
â”‚                                                 â”‚
â”‚  saveNewAddress: boolean                        â”‚
â”‚  â†“ NEW: Should save the address after checkout â”‚
â”‚                                                 â”‚
â”‚  formData: AddressFormData                      â”‚
â”‚  â†“ New address form fields                    â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
         Used for:
         â€¢ Rendering address list
         â€¢ Form visibility
         â€¢ Address selection
         â€¢ Submit logic
```

---

## Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend API Call              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  try {                          â”‚
â”‚    fetch(url, options)          â”‚
â”‚  } catch (error) {              â”‚
â”‚    console.error(error)         â”‚
â”‚    toast.error(message)         â”‚
â”‚    setError(message)            â”‚
â”‚  }                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Error Handling         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Invalid token â†’ 401          â”‚
â”‚  â€¢ Missing field â†’ 400          â”‚
â”‚  â€¢ User not found â†’ 404         â”‚
â”‚  â€¢ Server error â†’ 500           â”‚
â”‚  â€¢ No access â†’ 403              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Feedback                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Toast notifications          â”‚
â”‚  â€¢ Error alert boxes            â”‚
â”‚  â€¢ Loading spinners             â”‚
â”‚  â€¢ Disabled buttons             â”‚
â”‚  â€¢ Form validation              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Layers

```
Layer 1: Client
â”œâ”€ localStorage (token stored)
â””â”€ HTTPS only in production

Layer 2: Network
â”œâ”€ Authorization header (Bearer token)
â””â”€ CORS (allowed origins)

Layer 3: Middleware
â”œâ”€ Token validation
â”œâ”€ User extraction
â””â”€ Error handling

Layer 4: Application
â”œâ”€ Input validation
â”œâ”€ User isolation
â””â”€ Response sanitization

Layer 5: Database
â”œâ”€ Relationship constraints
â”œâ”€ Foreign keys
â””â”€ Cascade delete
```

---

## Testing Coverage

```
âœ… Unit Tests Ready
â”œâ”€ Auth functions
â”œâ”€ Address CRUD
â””â”€ Validation

âœ… Integration Tests
â”œâ”€ Auth â†’ DB
â”œâ”€ Frontend â†’ Backend
â””â”€ Full flow scenarios

âœ… Manual Tests
â”œâ”€ Registration scenario
â”œâ”€ Login scenario
â”œâ”€ Address save scenario
â””â”€ Reuse address scenario
```

---

## Deployment Readiness

```
âœ… Code Quality
â”œâ”€ TypeScript strict mode
â”œâ”€ Error handling
â””â”€ Code organization

âœ… Security
â”œâ”€ No passwords in DB
â”œâ”€ JWT authentication
â”œâ”€ User isolation
â””â”€ Input validation

â³ Not Yet Ready
â”œâ”€ Email verification
â”œâ”€ HTTPS/SSL
â”œâ”€ Rate limiting
â”œâ”€ Monitoring
â””â”€ Backups

âŒ Not Implemented
â”œâ”€ Google OAuth (deferred)
â”œâ”€ Password reset
â””â”€ 2FA
```

---

## Performance Characteristics

```
API Response Times (Estimated)
â”œâ”€ Register: < 500ms (Firebase + DB)
â”œâ”€ Login: < 300ms (Firebase lookup)
â”œâ”€ Get Addresses: < 100ms (DB query)
â”œâ”€ Save Address: < 200ms (DB insert)
â””â”€ Place Order: < 500ms (Multiple inserts)

Database Indexes
â”œâ”€ User.firebaseUid (UNIQUE)
â”œâ”€ Address.userId (FK)
â””â”€ Cart.userId

Caching
â”œâ”€ JWT in localStorage
â”œâ”€ User data in localStorage
â””â”€ Address list in component state

Resource Usage
â”œâ”€ Frontend bundle: ~XXX KB
â”œâ”€ Backend startup: ~XXX MB
â””â”€ Database size: ~XXX MB
```

---

## Future Enhancement Roadmap

```
Phase 1: âœ… Current (Complete)
â”œâ”€ Email/password auth
â”œâ”€ Address management
â””â”€ Checkout integration

Phase 2: â³ Planned
â”œâ”€ Google OAuth
â”œâ”€ Email verification
â””â”€ Profile management page

Phase 3: ğŸ”® Future
â”œâ”€ Password reset
â”œâ”€ Two-factor auth
â”œâ”€ Order history
â””â”€ Address book UI
```

---

**Status: Ready for Testing & Deployment** ğŸš€
